"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Provider=_interopRequireDefault(require("./Provider")),_rxjs=require("rxjs"),_operators=require("rxjs/operators");/**
 * A provider that uses the Window postMessage API to pass messages between windows (e.g. iframes).
 *
 * @class WindowMessage
 * @extends {Provider}
 */class WindowMessage extends _Provider.default{/**
   * Create a new message provider for use with windows.
   *
   * @param {Object} [target=window.parent] An window implementing the postMessage API.
   */constructor(target=window.parent){super(),this.target=target,this.messages$=(0,_rxjs.fromEvent)(window,"message",!1).pipe((0,_operators.filter)(event=>event.source===this.target),(0,_operators.pluck)("data"),(0,_operators.publish)()),this.messages$.connect()}/**
   * An observable of messages being sent to this provider.
   *
   * @returns {Observable} An [RxJS observable](http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html)
   */messages(){return this.messages$}/**
   * Send a payload to the underlying target of this provider.
   *
   * @param {Object} payload
   */send(payload){this.target.postMessage(payload,"*")}}exports.default=WindowMessage;
//# sourceMappingURL=WindowMessage.js.map