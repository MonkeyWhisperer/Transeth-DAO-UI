{"version":3,"sources":["../../../src/rpc/handlers/past-events.js"],"names":["request","proxy","params","length","eventNames","eventOptions","pastEvents","fromBlock","toBlock"],"mappings":"aAAA,0C,oDA6duB;4BA3dR,kBAAUA,OAAV,CAAmBC,KAAnB,CAAmC,CAChD;AACA;AACA;AACA,GAA8B,CAA1B,GAAAD,OAAO,CAACE,MAAR,CAAeC,MAAf,EAA4D,QAA7B,QAAOH,CAAAA,OAAO,CAACE,MAAR,CAAe,CAAf,CAA1C,CAA0E,CACxE;AADwE,KAElEE,CAAAA,UAAU,CAAG,0BAAcJ,OAAO,CAACE,MAAR,CAAe,CAAf,CAAd,CAFqD,CAGlEG,YAAY,CAAGL,OAAO,CAACE,MAAR,CAAe,CAAf,CAHmD,CAIxE,MAAOD,CAAAA,KAAK,CAACK,UAAN,CAAiBF,UAAjB,CAA6BC,YAA7B,CACR,CAOD;AAPO,GAA6B,CAAzB,EAAAL,OAAO,CAACE,MAAR,CAAeC,MAAnB,CAAgC,CACrC;AADqC,KAE/BI,CAAAA,SAAS,CAAGP,OAAO,CAACE,MAAR,CAAe,CAAf,CAFmB,CAG/BM,OAAO,CAAGR,OAAO,CAACE,MAAR,CAAe,CAAf,CAHqB,CAIrC,MAAOD,CAAAA,KAAK,CAACK,UAAN,CAAiB,IAAjB,CAAuB,CAAEC,SAAF,CAAaC,OAAb,CAAvB,CACR,CAGD,MAAOP,CAAAA,KAAK,CAACK,UAAN,EACR","sourcesContent":["import { getEventNames } from '../../utils/events'\n\nexport default function (request, proxy, wrapper) {\n  // `past_events` RPC compatibility with aragonAPI versions:\n  //   - aragonAPIv2: `'past_events', [eventNames, eventOptions]`\n  //   - aragonAPIv1: `'past_events', [fromBlock (optional), toBlock (optional)]`\n  if (request.params.length === 2 && typeof request.params[1] === 'object') {\n    // aragonAPIv2\n    const eventNames = getEventNames(request.params[0])\n    const eventOptions = request.params[1]\n    return proxy.pastEvents(eventNames, eventOptions)\n  } else if (request.params.length <= 2) {\n    // aragonAPIv1\n    const fromBlock = request.params[0]\n    const toBlock = request.params[1]\n    return proxy.pastEvents(null, { fromBlock, toBlock })\n  }\n\n  // Otherwise, just use pastEvent defaults\n  return proxy.pastEvents()\n}\n"],"file":"past-events.js"}