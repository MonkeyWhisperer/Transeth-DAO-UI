{"version":3,"file":"index.test.js","names":["test","beforeEach","t","configurationStub","getConfiguration","sinon","stub","Cache","proxyquire","default","context","afterEach","always","restore","plan","instance","init","is","db","driver","memoryStorageDriver","_driver","changes","subscribe","change","deepEqual","key","value","set","get","drivers","localforage","INDEXEDDB","LOCALSTORAGE","withArgs","configurationKeys","FORCE_LOCAL_STORAGE","returns","setItem","getItem","getCall","args","title","allBefore","getAll","allAfter","Object","keys","length","one","two","three","four","item","removeItem","remove","clear","observable","observe","Promise","resolve","setTimeout","emissionNumber","next"],"sources":["../../src/cache/index.test.js"],"sourcesContent":["import test from 'ava'\nimport proxyquire from 'proxyquire'\nimport sinon from 'sinon'\n\nimport localforage from 'localforage'\nimport memoryStorageDriver from 'localforage-memoryStorageDriver'\nimport * as configurationKeys from '../configuration/keys'\n\ntest.beforeEach(t => {\n  const configurationStub = {\n    getConfiguration: sinon.stub()\n  }\n  const Cache = proxyquire('./index', {\n    '../configuration': configurationStub\n  }).default\n\n  t.context = {\n    Cache,\n    configurationStub\n  }\n})\n\ntest.afterEach.always(() => {\n  sinon.restore()\n})\n\ntest('should set the cache driver to in-memory on non-browser environments', async (t) => {\n  const { Cache } = t.context\n\n  t.plan(3)\n  // arrange\n  const instance = new Cache('counterapp')\n  await instance.init()\n  // assert\n  t.is(instance.db.driver(), memoryStorageDriver._driver)\n  instance.changes.subscribe(change => {\n    t.deepEqual(change, { key: 'counter', value: 5 })\n  })\n  // act\n  await instance.set('counter', 5)\n  // assert\n  t.is(await instance.get('counter'), 5)\n})\n\ntest('should prefer indexeddb driver by default', async (t) => {\n  const { Cache } = t.context\n\n  // arrange\n  const instance = new Cache('counterapp')\n  // assert\n  t.deepEqual(\n    instance.drivers,\n    [localforage.INDEXEDDB, localforage.LOCALSTORAGE, memoryStorageDriver]\n  )\n})\n\ntest('should downgrade to localstorage driver when requested', async (t) => {\n  const { Cache, configurationStub } = t.context\n\n  // arrange\n  configurationStub.getConfiguration.withArgs(configurationKeys.FORCE_LOCAL_STORAGE).returns(true)\n  // act\n  const instance = new Cache('counterapp')\n  // assert\n  t.deepEqual(\n    instance.drivers,\n    [localforage.LOCALSTORAGE, memoryStorageDriver]\n  )\n})\n\ntest('should set to the cache and emit the change', async (t) => {\n  const { Cache } = t.context\n\n  t.plan(3)\n  // arrange\n  const instance = new Cache('counterapp')\n  await instance.init()\n  instance.db.setItem = sinon.stub()\n  instance.db.getItem = sinon.stub()\n  // assert\n  instance.changes.subscribe(change => {\n    t.deepEqual(change, { key: 'counter', value: 5 })\n    t.is(instance.db.setItem.getCall(0).args[0], 'counter')\n    t.is(instance.db.setItem.getCall(0).args[1], 5)\n  })\n  // act\n  await instance.set('counter', 5)\n})\n\ntest('should set to the cache and return all', async t => {\n  const { Cache } = t.context\n\n  t.plan(3)\n  // arrange\n  const instance = new Cache(t.title)\n  await instance.init()\n\n  const allBefore = await instance.getAll()\n  t.deepEqual(allBefore, {}, 'empty object when cache is empty')\n\n  await instance.set('one', 1)\n  await instance.set('two', 2)\n  await instance.set('three', 3)\n  await instance.set('four', 4)\n\n  const allAfter = await instance.getAll()\n  t.is(Object.keys(allAfter).length, 4)\n  t.deepEqual(allAfter, {\n    one: 1,\n    two: 2,\n    three: 3,\n    four: 4\n  })\n})\n\ntest('should return null when getting a non existant item', async t => {\n  const { Cache } = t.context\n\n  t.plan(1)\n  const instance = new Cache('counterapp')\n  await instance.init()\n\n  const item = await instance.get('nonexistant')\n  t.is(item, null)\n})\n\ntest('should remove from the cache and emit the change', async (t) => {\n  const { Cache } = t.context\n\n  t.plan(2)\n  // arrange\n  const instance = new Cache('counterapp')\n  await instance.init()\n  instance.db.removeItem = sinon.stub()\n  instance.db.getItem = sinon.stub()\n  // assert\n  instance.changes.subscribe(change => {\n    t.deepEqual(change, { key: 'counter', value: null })\n    t.is(instance.db.removeItem.getCall(0).args[0], 'counter')\n  })\n  // act\n  await instance.remove('counter')\n})\n\ntest('should clear from the cache and emit the change', async (t) => {\n  const { Cache } = t.context\n\n  t.plan(2)\n  // arrange\n  const instance = new Cache('counterapp')\n  await instance.init()\n  instance.db.clear = sinon.stub()\n  instance.db.setItem = sinon.stub()\n  instance.db.getItem = sinon.stub()\n\n  const observable = instance.observe('counter', 1)\n\n  // Make sure the get request is finished before we try to clear\n  await new Promise(resolve => setTimeout(resolve, 0))\n\n  // assert\n  let emissionNumber = 0\n  observable.subscribe(value => {\n    emissionNumber++\n    // first value should be 1 (the default) because getItem returns falsy\n    if (emissionNumber === 1) t.is(value, 1)\n    // second value should be the cache clear\n    if (emissionNumber === 2) t.is(value, null)\n  })\n\n  // act\n  await instance.clear()\n})\n\ntest('should observe the key\\'s value for changes in the correct order if getItem is fast', async (t) => {\n  const { Cache } = t.context\n\n  t.plan(4)\n  // arrange\n  const instance = new Cache()\n  await instance.init()\n  instance.db.getItem = sinon.stub().returns(\n    new Promise(resolve => setTimeout(resolve, 300))\n  )\n  // act\n  const observable = instance.observe('counter', 1)\n\n  // assert\n  let emissionNumber = 0\n  observable.subscribe(value => {\n    emissionNumber++\n    // first value should be 1 (the default) because getItem returns falsy\n    if (emissionNumber === 1) t.is(value, 1)\n    if (emissionNumber === 2) t.is(value, 10)\n    if (emissionNumber === 3) t.is(value, 11)\n    if (emissionNumber === 4) t.is(value, 12)\n  })\n\n  // these values will emit after get finishes\n  setTimeout(() => {\n    instance.changes.next({ key: 'counter', value: 10 })\n    instance.changes.next({ key: 'counter', value: 11 })\n    instance.changes.next({ key: 'somekey', value: 'hey' }) // will be ignored\n    instance.changes.next({ key: 'counter', value: 12 })\n  }, 500)\n\n  // hack so the test doesn't finish prematurely\n  await new Promise(resolve => setTimeout(resolve, 700))\n})\n\ntest('should observe the key\\'s value for changes in the correct order if getItem is slow', async (t) => {\n  const { Cache } = t.context\n\n  t.plan(5)\n  // arrange\n  const instance = new Cache()\n  await instance.init()\n  instance.db.getItem = sinon.stub().returns(\n    new Promise(resolve => setTimeout(resolve, 300))\n  )\n  // act\n  const observable = instance.observe('counter', 1)\n  // assert\n  let emissionNumber = 0\n  observable.subscribe(value => {\n    emissionNumber++\n    // first value should be 4 because new sets happen immediately\n    if (emissionNumber === 1) t.is(value, 4)\n    if (emissionNumber === 2) t.is(value, 5)\n    if (emissionNumber === 3) t.is(value, 10)\n    if (emissionNumber === 4) t.is(value, 11)\n    if (emissionNumber === 5) t.is(value, 12)\n  })\n\n  // these values will emit before `get` finishes\n  instance.changes.next({ key: 'counter', value: 4 })\n  instance.changes.next({ key: 'counter', value: 5 })\n\n  // these values will emit after get finishes\n  setTimeout(() => {\n    instance.changes.next({ key: 'counter', value: 10 })\n    instance.changes.next({ key: 'counter', value: 11 })\n    instance.changes.next({ key: 'somekey', value: 'hey' }) // will be ignored\n    instance.changes.next({ key: 'counter', value: 12 })\n  }, 500)\n\n  // hack so the test doesn't finish prematurely\n  await new Promise(resolve => setTimeout(resolve, 700))\n})\n"],"mappings":"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"}