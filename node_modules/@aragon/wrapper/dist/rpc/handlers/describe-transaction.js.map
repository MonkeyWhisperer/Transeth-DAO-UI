{"version":3,"file":"describe-transaction.js","names":["request","proxy","wrapper","transaction","params","to","Error","data","description","decoratedTransaction","tryEvaluatingRadspec","_","processed","postprocessRadspecDescription","annotatedDescription"],"sources":["../../../src/rpc/handlers/describe-transaction.js"],"sourcesContent":["import { postprocessRadspecDescription, tryEvaluatingRadspec } from '../../radspec'\n\nexport default async function (request, proxy, wrapper) {\n  const [transaction = {}] = request.params\n  if (!transaction.to) {\n    throw new Error(`Could not describe transaction: missing 'to'`)\n  }\n  if (!transaction.data) {\n    throw new Error(`Could not describe transaction: missing 'data'`)\n  }\n\n  let description\n  try {\n    const decoratedTransaction = await tryEvaluatingRadspec(transaction, wrapper)\n    description = decoratedTransaction.description\n  } catch (_) {}\n\n  if (description) {\n    try {\n      const processed = await postprocessRadspecDescription(description, wrapper)\n      return {\n        annotatedDescription: processed.annotatedDescription,\n        description: processed.description\n      }\n    } catch (_) {}\n  }\n\n  return {\n    description\n  }\n}\n"],"mappings":"aAAA,sC,oDAqeuB;4BAneR,wBAAgBA,OAAhB,CAAyBC,KAAzB,CAAgCC,OAAhC,CAAyC,CACtD,KAAM,CAACC,WAAW,CAAG,EAAf,EAAqBH,OAAO,CAACI,MAAnC,CACA,GAAI,CAACD,WAAW,CAACE,EAAjB,CACE,KAAM,IAAIC,MAAJ,CAAW,8CAAX,CAAN,CAEF,GAAI,CAACH,WAAW,CAACI,IAAjB,CACE,KAAM,IAAID,MAAJ,CAAW,gDAAX,CAAN,CAGF,GAAIE,YAAJ,CACA,GAAI,CACF,KAAMC,qBAAoB,CAAG,KAAM,GAAAC,6BAAA,EAAqBP,WAArB,CAAkCD,OAAlC,CAAnC,CACAM,WAAW,CAAGC,oBAAoB,CAACD,WACpC,CAAC,MAAOG,CAAP,CAAU,CAAE,CAEd,GAAIH,WAAJ,CACE,GAAI,CACF,KAAMI,UAAS,CAAG,KAAM,GAAAC,sCAAA,EAA8BL,WAA9B,CAA2CN,OAA3C,CAAxB,CACA,MAAO,CACLY,oBAAoB,CAAEF,SAAS,CAACE,oBAD3B,CAELN,WAAW,CAAEI,SAAS,CAACJ,WAFlB,CAIR,CAAC,MAAOG,CAAP,CAAU,CAAE,CAGhB,MAAO,CACLH,WADK,CAGR"}