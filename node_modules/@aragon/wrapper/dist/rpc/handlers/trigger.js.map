{"version":3,"file":"trigger.js","names":["trigger","request","proxy","wrapper","operation","params","appContextPool","get","address","APP_CONTEXTS","TRIGGER","eventName","data","slice","emit","event","returnValues","Promise","resolve","reject","Error"],"sources":["../../../src/rpc/handlers/trigger.js"],"sourcesContent":["import { APP_CONTEXTS } from '../../apps'\n\nexport default function trigger (request, proxy, wrapper) {\n  const [operation] = request.params\n\n  if (operation === 'observe') {\n    return wrapper.appContextPool.get(proxy.address, APP_CONTEXTS.TRIGGER)\n  }\n  if (operation === 'emit') {\n    const [\n      eventName,\n      data\n    ] = request.params.slice(1)\n\n    wrapper.appContextPool.emit(\n      proxy.address,\n      APP_CONTEXTS.TRIGGER,\n      // Mimic web3.js@1's event schema\n      {\n        event: eventName,\n        // `returnValues` is always a object for real Ethereum events\n        returnValues: data || {}\n      }\n    )\n    return Promise.resolve()\n  }\n\n  return Promise.reject(\n    new Error('Invalid trigger operation')\n  )\n}\n"],"mappings":"aAAA,gC,oDAqeuB;2BAneR,QAASA,QAAT,CAAkBC,OAAlB,CAA2BC,KAA3B,CAAkCC,OAAlC,CAA2C,CACxD,KAAM,CAACC,SAAD,EAAcH,OAAO,CAACI,MAA5B,CAEA,GAAkB,SAAd,GAAAD,SAAJ,CACE,MAAOD,QAAO,CAACG,cAAR,CAAuBC,GAAvB,CAA2BL,KAAK,CAACM,OAAjC,CAA0CC,kBAAA,CAAaC,OAAvD,CAAP,CAEF,GAAkB,MAAd,GAAAN,SAAJ,CAA0B,CACxB,KAAM,CACJO,SADI,CAEJC,IAFI,EAGFX,OAAO,CAACI,MAAR,CAAeQ,KAAf,CAAqB,CAArB,CAHJ,CAeA,MAVAV,QAAO,CAACG,cAAR,CAAuBQ,IAAvB,CACEZ,KAAK,CAACM,OADR,CAEEC,kBAAA,CAAaC,OAFf,CAGE;AACA,CACEK,KAAK,CAAEJ,SADT,CAEE;AACAK,YAAY,CAAEJ,IAAI,EAAI,EAHxB,CAJF,CAUA,CAAOK,OAAO,CAACC,OAAR,EACR,CAED,MAAOD,QAAO,CAACE,MAAR,CACL,GAAIC,MAAJ,CAAU,2BAAV,CADK,CAGR"}