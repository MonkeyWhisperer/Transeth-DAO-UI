{"version":3,"file":"interfaces.test.js","names":["test","afterEach","always","sinon","restore","t","plan","forEach","abiName","result","getAbi","true","Array","isArray","emptyResult","is","artifactName","getArtifact","availableMappings","apmAppId","namespace","appIds","appId","getAppInfo","abi","emptyDueToUnknownMapping","emptyDueToUnknownApp","hasAppInfo","false"],"sources":["../src/interfaces.test.js"],"sourcesContent":["import test from 'ava'\nimport sinon from 'sinon'\nimport { getAbi, getArtifact, getAppInfo, hasAppInfo } from './interfaces'\nimport { apmAppId } from './utils/apps'\n\ntest.afterEach.always(() => {\n  sinon.restore()\n})\n\ntest('interfaces: getAbi', async (t) => {\n  t.plan(12)\n  // arrange\n  const availableABIs = [\n    'aragon/ACL',\n    'aragon/AppProxy',\n    'aragon/ERCProxy',\n    'aragon/Forwarder',\n    'aragon/ForwarderFee',\n    'aragon/Kernel',\n    'aragon/EVM Script Registry',\n    'apm/APM Registry',\n    'apm/Repo',\n    'apm/ENS Subdomain Registrar',\n    'standard/ERC20'\n  ]\n  // assert\n  availableABIs.forEach(abiName => {\n    const result = getAbi(abiName)\n    t.true(Array.isArray(result), abiName)\n  })\n\n  const emptyResult = getAbi()\n  t.is(emptyResult, null)\n})\n\ntest('interfaces: getArtifact', async (t) => {\n  t.plan(13)\n  // arrange\n  const availableArtifacts = [\n    'aragon/ACL',\n    'aragon/Kernel',\n    'aragon/EVM Script Registry',\n    'apm/APM Registry',\n    'apm/Repo',\n    'apm/ENS Subdomain Registrar'\n  ]\n  // assert\n  availableArtifacts.forEach(artifactName => {\n    const result = getArtifact(artifactName)\n    t.true('functions' in result)\n    t.true('roles' in result)\n  })\n\n  const emptyResult = getArtifact()\n  t.is(emptyResult, null)\n})\n\ntest('interfaces: getAppInfo', async (t) => {\n  t.plan(29)\n  // arrange\n  const availableMappings = [\n    ['aragon', [\n      apmAppId('acl'),\n      apmAppId('evmreg'),\n      apmAppId('kernel')\n    ]],\n    ['apm', [\n      apmAppId('apm-registry'),\n      apmAppId('apm-repo'),\n      apmAppId('apm-enssub'),\n      apmAppId('apm-registry.open'),\n      apmAppId('apm-repo.open'),\n      apmAppId('apm-enssub.open')\n    ]]\n  ]\n  // assert\n  availableMappings.forEach(([namespace, appIds]) => {\n    appIds.forEach((appId) => {\n      const result = getAppInfo(appId, namespace)\n      t.true(Array.isArray(result.abi))\n      t.true('functions' in result)\n      t.true('roles' in result)\n    })\n  })\n\n  const emptyDueToUnknownMapping = getAppInfo(apmAppId('acl'), 'wrongNamespace')\n  t.is(emptyDueToUnknownMapping, null)\n\n  const emptyDueToUnknownApp = getAppInfo(apmAppId('wrongApp'), 'aragon')\n  t.is(emptyDueToUnknownApp, null)\n})\n\ntest('interfaces: hasAppInfo', async (t) => {\n  t.plan(11)\n  const availableMappings = [\n    ['aragon', [\n      apmAppId('acl'),\n      apmAppId('evmreg'),\n      apmAppId('kernel')\n    ]],\n    ['apm', [\n      apmAppId('apm-registry'),\n      apmAppId('apm-repo'),\n      apmAppId('apm-enssub'),\n      apmAppId('apm-registry.open'),\n      apmAppId('apm-repo.open'),\n      apmAppId('apm-enssub.open')\n    ]]\n  ]\n  // assert\n  availableMappings.forEach(([namespace, appIds]) => {\n    appIds.forEach((appId) => {\n      t.true(hasAppInfo(appId, namespace))\n    })\n  })\n\n  t.false(hasAppInfo(apmAppId('acl'), 'wrongNamespace'))\n  t.false(hasAppInfo(apmAppId('wrongApp'), 'aragon'))\n})\n"],"mappings":"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"}