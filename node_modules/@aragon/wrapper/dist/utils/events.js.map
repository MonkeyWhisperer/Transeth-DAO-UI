{"version":3,"file":"events.js","names":["getEventNames","eventNames","Array","isArray","getPastEventsByBatch","options","contract","eventName","res","opts","batchSize","blockSizeLimit","i","fromBlock","toBlock","arr","getPastEvents","length","concat"],"sources":["../../src/utils/events.js"],"sourcesContent":["export function getEventNames (eventNames) {\n  // Get all events\n  if (!eventNames) {\n    return ['allEvents']\n  }\n\n  // Convert `eventNames` to an array in order to\n  // support `.events(name)` and `.events([a, b])`\n  if (!Array.isArray(eventNames)) {\n    eventNames = [eventNames]\n  }\n\n  return eventNames\n}\n\n// get all events by blocks\nexport async function getPastEventsByBatch ({ options, contract, eventName }) {\n  let res = []\n  const opts = { ...options }\n  const batchSize = +options.blockSizeLimit\n\n  for (let i = +options.fromBlock; i < +options.toBlock; i += batchSize) {\n    opts.fromBlock = i\n    const toBlock = i + batchSize - 1\n    if (toBlock > options.toBlock) {\n      opts.toBlock = options.toBlock\n    } else {\n      opts.toBlock = toBlock\n    }\n\n    const arr = await contract.getPastEvents(eventName, opts)\n    if (arr && arr.length) {\n      res = res.concat(arr)\n    }\n  }\n\n  return res\n}\n"],"mappings":"kPAqeuB;s2BArehB,QAASA,cAAT,CAAwBC,UAAxB,CAAoC,CACzC;AADyC,MAEpCA,WAFoC,EAQpCC,KAAK,CAACC,OAAN,CAAcF,UAAd,CARoC,GASvCA,UAAU,CAAG,CAACA,UAAD,CAT0B,EAYlCA,UAZkC,EAGhC,CAAC,WAAD,CAHgC,CAMzC;AACA;AAMD,CAED;AACO,cAAeG,qBAAf,MAAuE,IAAlC,CAAEC,OAAF,CAAWC,QAAX,CAAqBC,SAArB,CAAkC,MACxEC,GAAG,CAAG,EADkE,MAEtEC,KAAI,kBAAQJ,OAAR,CAFkE,CAGtEK,SAAS,CAAG,CAACL,OAAO,CAACM,cAHiD,CAK5E,IAAK,GAAIC,EAAC,CAAG,CAACP,OAAO,CAACQ,SAAtB,CAAiCD,CAAC,CAAG,CAACP,OAAO,CAACS,OAA9C,CAAuDF,CAAC,EAAIF,SAA5D,CAAuE,CACrED,IAAI,CAACI,SAAL,CAAiBD,CADoD,CAErE,KAAME,QAAO,CAAGF,CAAC,CAAGF,SAAJ,CAAgB,CAAhC,CAEED,IAAI,CAACK,OAJ8D,CAGjEA,OAAO,CAAGT,OAAO,CAACS,OAH+C,CAIpDT,OAAO,CAACS,OAJ4C,CAMpDA,OANoD,CASrE,KAAMC,IAAG,CAAG,KAAMT,SAAQ,CAACU,aAAT,CAAuBT,SAAvB,CAAkCE,IAAlC,CAAlB,CACIM,GAAG,EAAIA,GAAG,CAACE,MAVsD,GAWnET,GAAG,CAAGA,GAAG,CAACU,MAAJ,CAAWH,GAAX,CAX6D,CAatE,CAED,MAAOP,IACR"}